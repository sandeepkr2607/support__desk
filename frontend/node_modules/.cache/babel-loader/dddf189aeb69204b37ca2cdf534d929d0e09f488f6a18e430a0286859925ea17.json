{"ast":null,"code":"import _slicedToArray from\"C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{getTicket,reset,closeTicket}from\"../features/tickets/ticketSlice\";import Modal from\"react-modal\";import{FaPlus}from\"react-icons/fa\";import{useParams,useNavigate}from\"react-router-dom\";import BackButton from\"../component/BackButton\";import Spinner from\"../component/Spinner\";import{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import{getNotes,createNotes,reset as notesReset}from\"../features/note/noteSlice\";import NoteItem from\"../component/NoteItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var customStyles={content:{width:\"600px\",top:\"50%\",left:\"50%\",right:\"auto\",bottom:\"auto\",marginRight:\"-50%\",transform:\"translate(-50%,-50%)\",position:\"relative\"}};Modal.setAppElement(\"#root\");function Ticket(){var _useSelector=useSelector(function(state){return state.ticket;}),ticket=_useSelector.ticket,isLoading=_useSelector.isLoading,isSuccess=_useSelector.isSuccess,isError=_useSelector.isError,message=_useSelector.message;var _useSelector2=useSelector(function(state){return state.notes;}),notes=_useSelector2.notes,notesIsLoading=_useSelector2.isLoading;var params=useParams();var _useParams=useParams(),ticketId=_useParams.ticketId;var Navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalIsOpen=_useState2[0],setModalIsOpen=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),noteText=_useState4[0],setNoteText=_useState4[1];useEffect(function(){if(isError){return toast.error(message);}dispatch(getTicket(ticketId));dispatch(getNotes(ticketId));// eslint-disable-next-line\n},[isError,message,ticketId]);// close Ticket\nvar onTicketClose=function onTicketClose(){dispatch(closeTicket(ticketId));toast.success(\"Ticket Close\");Navigate(\"/tickets\");};// submit\nvar onNoteSubmit=function onNoteSubmit(e){e.preventDefault();dispatch(createNotes({noteText:noteText,ticketId:ticketId}));closeModal();};// open/close modal\nvar openModal=function openModal(){return setModalIsOpen(true);};var closeModal=function closeModal(){return setModalIsOpen(false);};if(isLoading||notesIsLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(isError){return/*#__PURE__*/_jsx(\"h3\",{children:\"Somthing went wrong\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-page\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"ticket-header\",children:[/*#__PURE__*/_jsx(BackButton,{url:\"/tickets\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Ticket ID: \",ticket._id,/*#__PURE__*/_jsx(\"span\",{className:\"status status-\".concat(ticket.status),children:ticket.status})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Date Submitted: \",new Date(ticket.createdAt).toLocaleString(\"en-US\")]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Product:\",ticket.product]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-desc\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description of Issue\"}),/*#__PURE__*/_jsx(\"p\",{children:ticket.description})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Notes\"})]}),ticket.status!==\"close\"&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:openModal,children:[\" \",/*#__PURE__*/_jsx(FaPlus,{}),\" Add Note\"]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalIsOpen,onRequestClose:closeModal,style:customStyles,contentLabel:\"Add Note\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Note\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:closeModal,children:\"X\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onNoteSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{name:\"noteText\",id:\"noteText\",className:\"form-control\",placeholder:\"Note text\",value:noteText,onChange:function onChange(e){return setNoteText(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Submit\"})})]})]}),notes.map(function(note){return/*#__PURE__*/_jsx(NoteItem,{note:note},note._id);}),ticket.status!==\"close\"&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-block btn-danger\",onClick:onTicketClose,children:\"Close Ticket\"})]});}export default Ticket;","map":{"version":3,"names":["React","useSelector","useDispatch","getTicket","reset","closeTicket","Modal","FaPlus","useParams","useNavigate","BackButton","Spinner","useEffect","useState","toast","getNotes","createNotes","notesReset","NoteItem","customStyles","content","width","top","left","right","bottom","marginRight","transform","position","setAppElement","Ticket","state","ticket","isLoading","isSuccess","isError","message","notes","notesIsLoading","params","ticketId","Navigate","dispatch","modalIsOpen","setModalIsOpen","noteText","setNoteText","error","onTicketClose","success","onNoteSubmit","e","preventDefault","closeModal","openModal","_id","status","Date","createdAt","toLocaleString","product","description","target","value","map","note"],"sources":["C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/src/pages/Ticket.jsx"],"sourcesContent":["import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getTicket, reset, closeTicket } from \"../features/tickets/ticketSlice\";\nimport Modal from \"react-modal\";\nimport { FaPlus } from \"react-icons/fa\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport BackButton from \"../component/BackButton\";\nimport Spinner from \"../component/Spinner\";\nimport { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport {\n  getNotes,\n  createNotes,\n  reset as notesReset,\n} from \"../features/note/noteSlice\";\nimport NoteItem from \"../component/NoteItem\";\n\nconst customStyles = {\n  content: {\n    width: \"600px\",\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%,-50%)\",\n    position: \"relative\",\n  },\n};\nModal.setAppElement(\"#root\");\n\nfunction Ticket() {\n  const { ticket, isLoading, isSuccess, isError, message } = useSelector(\n    (state) => state.ticket\n  );\n  const { notes, isLoading: notesIsLoading } = useSelector(\n    (state) => state.notes\n  );\n  const params = useParams();\n  const { ticketId } = useParams();\n  const Navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [noteText, setNoteText] = useState(\"\");\n\n  useEffect(() => {\n    if (isError) {\n      return toast.error(message);\n    }\n    dispatch(getTicket(ticketId));\n    dispatch(getNotes(ticketId));\n\n    // eslint-disable-next-line\n  }, [isError, message, ticketId]);\n\n  // close Ticket\n  const onTicketClose = () => {\n    dispatch(closeTicket(ticketId));\n    toast.success(\"Ticket Close\");\n    Navigate(\"/tickets\");\n  };\n  // submit\n  const onNoteSubmit = (e) => {\n    e.preventDefault();\n    dispatch(\n      createNotes({\n        noteText,\n        ticketId,\n      })\n    );\n    closeModal();\n  };\n\n  // open/close modal\n  const openModal = () => setModalIsOpen(true);\n  const closeModal = () => setModalIsOpen(false);\n\n  if (isLoading || notesIsLoading) {\n    return <Spinner />;\n  }\n  if (isError) {\n    return <h3>Somthing went wrong</h3>;\n  }\n\n  return (\n    <div className=\"ticket-page\">\n      <header className=\"ticket-header\">\n        <BackButton url=\"/tickets\" />\n        <h2>\n          Ticket ID: {ticket._id}\n          <span className={`status status-${ticket.status}`}>\n            {ticket.status}\n          </span>\n        </h2>\n        <h3>\n          Date Submitted: {new Date(ticket.createdAt).toLocaleString(\"en-US\")}\n        </h3>\n        <h3>Product:{ticket.product}</h3>\n        <hr />\n        <div className=\"ticket-desc\">\n          <h3>Description of Issue</h3>\n          <p>{ticket.description}</p>\n        </div>\n        <h2>Notes</h2>\n      </header>\n      {ticket.status !== \"close\" && (\n        <button className=\"btn\" onClick={openModal}>\n          {\" \"}\n          <FaPlus /> Add Note\n        </button>\n      )}\n      <Modal\n        isOpen={modalIsOpen}\n        onRequestClose={closeModal}\n        style={customStyles}\n        contentLabel=\"Add Note\"\n      >\n        <h2>Add Note</h2>\n        <button className=\"btn-close\" onClick={closeModal}>\n          X\n        </button>\n        <form onSubmit={onNoteSubmit}>\n          <div className=\"form-group\">\n            <textarea\n              name=\"noteText\"\n              id=\"noteText\"\n              className=\"form-control\"\n              placeholder=\"Note text\"\n              value={noteText}\n              onChange={(e) => setNoteText(e.target.value)}\n            ></textarea>\n          </div>\n          <div className=\"form-group\">\n            <button className=\"btn\" type=\"submit\">\n              Submit\n            </button>\n          </div>\n        </form>\n      </Modal>\n\n      {notes.map((note) => (\n        <NoteItem key={note._id} note={note} />\n      ))}\n      {ticket.status !== \"close\" && (\n        <button className=\"btn btn-block btn-danger\" onClick={onTicketClose}>\n          Close Ticket\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default Ticket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}