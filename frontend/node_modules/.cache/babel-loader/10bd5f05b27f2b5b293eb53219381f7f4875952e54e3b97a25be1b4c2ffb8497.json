{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import authService from'./authService';// get user from localStorage\nvar user=JSON.parse(localStorage.getItem('user'));var initialState={user:user?user:null,isError:false,isSuccess:false,isLoading:false,message:''};// creating createAsyncThunk to hook the form data into redux register (user)\nexport var register=createAsyncThunk('auth/register',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,thunkAPI){var message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authService.register(user);case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// for login (current user)data creating createAsyncThunk\nexport var login=createAsyncThunk('auth/login',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user,thunkAPI){var message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return authService.login(user);case 3:return _context2.abrupt(\"return\",_context2.sent);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// logout user\nexport var logout=createAsyncThunk('auth/logout',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return authService.logout();case 2:case\"end\":return _context3.stop();}}},_callee3);})));export var authSlice=createSlice({name:'auth',initialState:initialState,reducers:{reset:function reset(state){state.isLoading=false;state.isError=false;state.isSuccess=false;state.message=\"\";}},extraReducers:function extraReducers(builder){builder.addCase(register.pending,function(state){state.isLoading=true;}).addCase(register.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(register.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(login.pending,function(state){state.isLoading=true;}).addCase(login.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(login.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(logout.fulfilled,function(state){state.user=null;});}});// whatever you created inside reducer the export like this\nvar reset=authSlice.actions.reset;export{reset};export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","user","JSON","parse","localStorage","getItem","initialState","isError","isSuccess","isLoading","message","register","thunkAPI","response","data","toString","rejectWithValue","login","logout","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/src/features/auth/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport authService from './authService';\n\n\n// get user from localStorage\nconst user = JSON.parse(localStorage.getItem('user'))\n\nconst initialState = {\n    user: user ? user : null,\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: ''\n}\n\n// creating createAsyncThunk to hook the form data into redux register (user)\nexport const register = createAsyncThunk('auth/register', async (user, thunkAPI) => {\n    // console.log(user);\n    try {\n        return await authService.register(user)\n    } catch (error) {\n        const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\n// for login (current user)data creating createAsyncThunk\nexport const login = createAsyncThunk('auth/login', async (user, thunkAPI) => {\n    try {\n        return await authService.login(user)\n    } catch (error) {\n        const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\n// logout user\n\nexport const logout = createAsyncThunk('auth/logout', async () => {\n    await authService.logout()\n})\n\n\nexport const authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        reset: (state) => {\n            state.isLoading = false\n            state.isError = false\n            state.isSuccess = false\n            state.message = \"\"\n\n\n\n        },\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(register.pending, (state) => {\n                state.isLoading = true\n            })\n            .addCase(register.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.user = action.payload\n            })\n            .addCase(register.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n                state.user = null\n            })\n            .addCase(login.pending, (state) => {\n                state.isLoading = true\n            })\n            .addCase(login.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.user = action.payload\n            })\n            .addCase(login.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n                state.user = null\n            })\n            .addCase(logout.fulfilled, (state) => {\n                state.user = null\n            })\n    }\n})\n// whatever you created inside reducer the export like this\nexport const { reset } = authSlice.actions\nexport default authSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}