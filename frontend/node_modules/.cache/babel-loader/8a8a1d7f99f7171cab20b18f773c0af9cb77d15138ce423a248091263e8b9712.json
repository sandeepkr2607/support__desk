{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import ticketService from'./ticketService';// creating the initial state like a object to store it into redux\nvar initialState={tickets:[],ticket:{},isError:false,isSuccess:false,isLoading:false,message:''};// create new ticket\nexport var createTicket=createAsyncThunk('tickets/create',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ticketData,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;// thunkApi is kind of object which store the various data e.g \ntoken=thunkAPI.getState().auth.user.token;_context.next=4;return ticketService.createTicket(ticketData,token);case 4:return _context.abrupt(\"return\",_context.sent);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Get user Ticket\nexport var getTickets=createAsyncThunk('tickets/getAll',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;token=thunkAPI.getState().auth.user.token;console.log(token);_context2.next=5;return ticketService.getTickets(token);case 5:return _context2.abrupt(\"return\",_context2.sent);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Get single user Ticket\nexport var getTicket=createAsyncThunk('tickets/get',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(ticketId,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=thunkAPI.getState().auth.user.token;console.log(token);_context3.next=5;return ticketService.getTicket(ticketId,token);case 5:return _context3.abrupt(\"return\",_context3.sent);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());//  close the  Ticket\nexport var closeTicket=createAsyncThunk('tickets/close',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(ticketId,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;token=thunkAPI.getState().auth.user.token;// console.log(token);\n_context4.next=4;return ticketService.closeTicket(ticketId,token);case 4:return _context4.abrupt(\"return\",_context4.sent);case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);message=_context4.t0.response&&_context4.t0.response.data&&_context4.t0.response.data.message||_context4.t0.message||_context4.t0.toString();return _context4.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}());export var ticketSlice=createSlice({name:'ticket',initialState:initialState,reducers:{reset:function reset(state){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(createTicket.pending,function(state){state.isLoading=true;}).addCase(createTicket.fulfilled,function(state){state.isLoading=false;state.isSuccess=true;}).addCase(createTicket.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;})// get tickets\n.addCase(getTickets.pending,function(state){state.isLoading=true;}).addCase(getTickets.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.tickets=action.payload;}).addCase(getTickets.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;})// get ticket\n.addCase(getTicket.pending,function(state){state.isLoading=true;}).addCase(getTicket.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.ticket=action.payload;}).addCase(getTicket.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;})// close ticket\n.addCase(closeTicket.fulfilled,function(state,action){state.isLoading=false;state.ticket.map(function(ticket){return ticket._id===action.payload._id?ticket.status='close':ticket;});});}});var reset=ticketSlice.actions.reset;export{reset};export default ticketSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","ticketService","initialState","tickets","ticket","isError","isSuccess","isLoading","message","createTicket","ticketData","thunkAPI","token","getState","auth","user","response","data","toString","rejectWithValue","getTickets","_","console","log","getTicket","ticketId","closeTicket","ticketSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","rejected","action","payload","map","_id","status","actions","reducer"],"sources":["C:/Users/sandeep singh/Desktop/MY PROJECTS/support-desk/frontend/src/features/tickets/ticketSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport ticketService from './ticketService'\n\n// creating the initial state like a object to store it into redux\nconst initialState = {\n    tickets: [],\n    ticket: {},\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: ''\n}\n// create new ticket\nexport const createTicket = createAsyncThunk(\n    'tickets/create',\n    async (ticketData, thunkAPI) => {\n        try {\n            // thunkApi is kind of object which store the various data e.g \n            const token = thunkAPI.getState().auth.user.token\n            return await ticketService.createTicket(ticketData, token)\n\n        } catch (error) {\n            const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n// Get user Ticket\nexport const getTickets = createAsyncThunk(\n    'tickets/getAll',\n    async (_, thunkAPI) => {\n        try {\n            const token = thunkAPI.getState().auth.user.token\n            console.log(token);\n            return await ticketService.getTickets(token)\n        } catch (error) {\n            const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\n// Get single user Ticket\nexport const getTicket = createAsyncThunk(\n    'tickets/get',\n    async (ticketId, thunkAPI) => {\n        try {\n            const token = thunkAPI.getState().auth.user.token\n            console.log(token);\n            return await ticketService.getTicket(ticketId, token)\n        } catch (error) {\n            const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n//  close the  Ticket\nexport const closeTicket = createAsyncThunk(\n    'tickets/close',\n    async (ticketId, thunkAPI) => {\n        try {\n            const token = thunkAPI.getState().auth.user.token\n            // console.log(token);\n            return await ticketService.closeTicket(ticketId, token)\n        } catch (error) {\n            const message = (error.response && error.response.data && error.response.data.message) || error.message || error.toString()\n\n            return thunkAPI.rejectWithValue(message)\n        }\n    }\n)\n\nexport const ticketSlice = createSlice({\n    name: 'ticket',\n    initialState,\n    reducers: {\n        reset: (state) => initialState\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(createTicket.pending, (state) => {\n                state.isLoading = true\n            })\n            .addCase(createTicket.fulfilled, (state) => {\n                state.isLoading = false\n                state.isSuccess = true\n            })\n            .addCase(createTicket.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n            // get tickets\n            .addCase(getTickets.pending, (state) => {\n                state.isLoading = true\n            })\n            .addCase(getTickets.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.tickets = action.payload\n            })\n            .addCase(getTickets.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n            // get ticket\n            .addCase(getTicket.pending, (state) => {\n                state.isLoading = true\n            })\n            .addCase(getTicket.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.isSuccess = true\n                state.ticket = action.payload\n            })\n            .addCase(getTicket.rejected, (state, action) => {\n                state.isLoading = false\n                state.isError = true\n                state.message = action.payload\n            })\n            // close ticket\n\n            .addCase(closeTicket.fulfilled, (state, action) => {\n                state.isLoading = false\n                state.ticket.map((ticket) => ticket._id === action.payload._id ? (ticket.status = 'close') : ticket)\n            })\n\n    }\n})\n\nexport const { reset } = ticketSlice.actions\nexport default ticketSlice.reducer\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}